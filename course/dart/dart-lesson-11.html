<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Урок 11: Множества (Set) в Dart</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="new-style.css">
    <link rel="stylesheet" id="theme-style" href="highlight/styles/github.css">
    <link rel="stylesheet" href="slideshow.css">
    <script src="highlight/highlight.min.js"></script>
</head>
<body>

    <nav id="side-menu">
        <h3>Урок 11: Множества (Set)</h3>
        <ul>
            <!-- Ссылки будут добавлены сюда динамически -->
        </ul>
    </nav>

    <div id="main-content">
        <h1>Множества (Set) в Dart</h1>

        <section class="lesson-section">
            <h2 style="display: inline;">Что такое множество (Set)?</h2>
            <p>Коллекция <code>Set</code> (множество) в программировании — это структура данных, которая хранит <strong>только уникальные элементы</strong>. Это означает, что если вы попытаетесь добавить один и тот же элемент несколько раз, <code>Set</code> сохранит его только один раз. Это делает <code>Set</code> очень полезным в ситуациях, когда необходимо исключить дубликаты и работать только с уникальными значениями.</p>
            
            <div class="note">
                <h4>Примеры проблем с дублированием данных</h4>
                <ul>
                    <li><strong>Система голосования:</strong> Каждый человек должен иметь только один голос.</li>
                    <li><strong>Уникальные идентификаторы (ID):</strong> В любой системе каждому объекту присваивается уникальный ID.</li>
                    <li><strong>Билеты на концерт:</strong> Каждый билет должен быть уникальным.</li>
                </ul>
            </div>
        </section>

        <section class="lesson-section">
            <h2 style="display: inline;">Решение проблемы уникальности</h2>
            <p>Как решали проблему раньше до <code>Set</code>? "Изобретали велосипеды"!</p>
            <div class="code-block-header">
                <h4 class="code-block-title">Dart - Ручная проверка на уникальность (плохой подход)</h4>
                <div class="code-block-controls">
                    <span class="code-block-control" onclick="toggleTheme('github')"><img class="icon" src="images/light.png" alt="Светлая тема"></span>
                    <span class="code-block-control" onclick="toggleTheme('atom-one-dark')"><img class="icon" src="images/dark.png" alt="Темная тема"></span>
                </div>
            </div>
            <pre><code class="language-dart">void main() {
  List<String> uniqueVotes = [];

  void addVote(String email) {
    bool exists = false;
    for (var vote in uniqueVotes) { // O(n) — медленно!
      if (vote == email) {
        exists = true;
        break;
      }
    }
    if (!exists) {
      uniqueVotes.add(email);
    }
  }

  addVote('artem@ya.ru');
  addVote('artem@ya.ru');
  addVote('anna@ya.ru');
  print(uniqueVotes); // [artem@ya.ru, anna@ya.ru]
}</code></pre>

            <p><strong>То же решение с использованием множества:</strong></p>
            <div class="code-block-header">
                <h4 class="code-block-title">Dart - Использование Set для уникальности (хороший подход)</h4>
                <div class="code-block-controls">
                    <span class="code-block-control" onclick="toggleTheme('github')"><img class="icon" src="images/light.png" alt="Светлая тема"></span>
                    <span class="code-block-control" onclick="toggleTheme('atom-one-dark')"><img class="icon" src="images/dark.png" alt="Темная тема"></span>
                </div>
            </div>
            <pre><code class="language-dart">void main() {
  Set<String> uniqueVotes = {}; // Создание пустого множества

  uniqueVotes.add('artem@ya.ru');
  uniqueVotes.add('artem@ya.ru');
  uniqueVotes.add('anna@ya.ru');

  print(uniqueVotes); // {artem@ya.ru, anna@ya.ru}
}</code></pre>
            <img src="images/l11/set-performance.png" alt="Производительность Set" width="500">
        </section>
        
        <section class="lesson-section">
            <h2 style="display: inline;">Операции над множествами</h2>
            <p><code>Set</code> предоставляет мощные методы для выполнения математических операций над множествами.</p>
            <div class="code-block-header">
                <h4 class="code-block-title">Dart - Операции над множествами</h4>
                <div class="code-block-controls">
                    <span class="code-block-control" onclick="toggleTheme('github')"><img class="icon" src="images/light.png" alt="Светлая тема"></span>
                    <span class="code-block-control" onclick="toggleTheme('atom-one-dark')"><img class="icon" src="images/dark.png" alt="Темная тема"></span>
                </div>
            </div>
            <pre><code class="language-dart">var setA = {'Witcher', 'Gwint', 'DMC', 'FF', 'LostArk'};
var setB = {'Warcraft', 'Witcher', 'Gwint', 'Diablo'};

// Разность множеств (A - B): элементы из A, которых нет в B
print(setA.difference(setB)); // {DMC, FF, LostArk}

// Пересечение множеств (A ∩ B): элементы, общие для A и B
print(setA.intersection(setB)); // {Witcher, Gwint}

// Объединение множеств (A ∪ B): все элементы из A и B
print(setA.union(setB)); // {Witcher, Gwint, DMC, FF, LostArk, Warcraft, Diablo}</code></pre>
        </section>

        <section class="lesson-section">
            <h2 style="display: inline;">Практическое применение</h2>
            <div class="note"><h4>Удаление дубликатов из списка:</h4></div>
            <pre><code class="language-dart">var listWithDuplicates = ['A', 'B', 'A', 'C', 'B'];
var uniqueItems = Set.from(listWithDuplicates).toList();
print(uniqueItems); // [A, B, C]</code></pre>

            <div class="note"><h4>Проверка уникальности элементов:</h4></div>
            <pre><code class="language-dart">bool hasUniqueElements(List list) {
  return list.length == Set.from(list).length;
}</code></pre>
            
            <div class="note"><h4>Нахождение общих элементов:</h4></div>
            <pre><code class="language-dart">var teamA = {'Анна', 'Юля', 'Наташа'};
var teamB = {'Юля', 'Антон', 'Артём'};

var inBothTeams = teamA.intersection(teamB);
print(inBothTeams); // {Юля}</code></pre>
        </section>

        <button id="scrollToTop" title="Наверх"></button>
    </div>

    <script src="slideshow.js"></script>
    <script>
        // Initialize Highlight.js
        hljs.highlightAll();

        function toggleTheme(themeName) {
            var themeLink = document.getElementById('theme-style');
            themeLink.href = "highlight/styles/" + themeName + ".css";
        }

        document.addEventListener('DOMContentLoaded', function() {
            const menu = document.querySelector('#side-menu ul');
            const sections = document.querySelectorAll('.lesson-section');
            const headers = document.querySelectorAll('#main-content h2');

            headers.forEach((header, index) => {
                const sectionId = `section-${index + 1}`;
                const section = header.closest('.lesson-section');
                if (section) {
                    section.id = sectionId;
                    const listItem = document.createElement('li');
                    const link = document.createElement('a');
                    link.href = `#${sectionId}`;
                    link.textContent = `${index + 1}. ${header.textContent}`;
                    link.dataset.sectionId = sectionId;
                    listItem.appendChild(link);
                    menu.appendChild(listItem);
                }
            });

            const menuLinks = document.querySelectorAll('#side-menu a');
            function showSection(sectionId, event) {
                if(event) event.preventDefault();
                let targetSection = document.getElementById(sectionId);
                if (!targetSection) return;
                sections.forEach(s => s.classList.remove('active'));
                targetSection.classList.add('active');
                menuLinks.forEach(l => l.classList.toggle('active', l.dataset.sectionId === sectionId));
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }

            menu.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    showSection(e.target.dataset.sectionId, e);
                }
            });

            if (sections.length > 0) {
                showSection(sections[0].id);
            }

            const scrollToTopButton = document.getElementById('scrollToTop');
            window.onscroll = () => {
                if (document.body.scrollTop > 20 || document.documentElement.scrollTop > 20) {
                    scrollToTopButton.style.display = 'block';
                } else {
                    scrollToTopButton.style.display = 'none';
                }
            };
            scrollToTopButton.onclick = () => window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html> 